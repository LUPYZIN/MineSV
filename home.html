<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Detalhes do Servidor - MineHost</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/732/732244.png">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getAuth,
            onAuthStateChanged 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { 
            getFirestore,
            collection,
            query,
            where,
            getDocs,
            doc,
            getDoc,
            updateDoc,
            increment
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAwgA3wphz-vgQgiN1S9evAxZ5R9r6qhac",
            authDomain: "minesv-5760d.firebaseapp.com",
            projectId: "minesv-5760d",
            storageBucket: "minesv-5760d.firebasestorage.app",
            messagingSenderId: "1028898660834",
            appId: "1:1028898660834:web:19399da70912b70737d9bb",
            measurementId: "G-VVXNMFCVLK"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.firebase = {
            auth,
            db,
            onAuthStateChanged,
            collection,
            query,
            where,
            getDocs,
            doc,
            getDoc,
            updateDoc,
            increment
        };
    </script>
    
    <!-- Fontes -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #1a5276;
            --primary-light: #2e86c1;
            --primary-dark: #154360;
            --secondary: #28b463;
            --secondary-light: #58d68d;
            --accent: #f39c12;
            --accent-glow: #f1c40f;
            --dark: #0c1a25;
            --darker: #050a0f;
            --light: #e8f4f8;
            --gray: #7f8c8d;
            --minecraft-green: #55FF55;
            --minecraft-red: #FF5555;
            --minecraft-blue: #5555FF;
            --minecraft-purple: #AA00AA;
            
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100%;
            overflow-x: hidden;
            position: relative;
        }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 50%, var(--primary-dark) 100%);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        /* LOADING */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--darker);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            color: var(--minecraft-green);
        }
        
        .loading.hidden {
            display: none;
        }
        
        /* HEADER */
        header {
            background: rgba(5, 10, 15, 0.95);
            backdrop-filter: blur(20px);
            padding: 15px 0;
            border-bottom: 2px solid rgba(46, 134, 193, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
            width: 100%;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            padding: 10px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            border: 2px solid transparent;
        }
        
        .back-btn:hover {
            background: rgba(85, 255, 85, 0.1);
            border-color: var(--minecraft-green);
            transform: translateY(-2px);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--minecraft-green), var(--secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo-icon i {
            color: white;
            font-size: 1rem;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-main {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            font-weight: 900;
            background: linear-gradient(to right, var(--minecraft-green), var(--minecraft-blue));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
            line-height: 1;
        }
        
        .logo-sub {
            font-size: 0.6rem;
            color: var(--secondary);
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-top: 2px;
            font-weight: 600;
        }
        
        /* BANNER HERO */
        .server-banner-hero {
            width: 100%;
            height: 300px;
            position: relative;
            overflow: hidden;
        }
        
        .server-banner-hero img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .banner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(5, 10, 15, 0.9));
            display: flex;
            align-items: flex-end;
            padding: 30px;
        }
        
        .server-basic-info {
            display: flex;
            align-items: center;
            gap: 20px;
            width: 100%;
        }
        
        .server-avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--minecraft-green), var(--minecraft-blue));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            border: 4px solid var(--light);
            box-shadow: var(--box-shadow);
        }
        
        .server-title-section h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: var(--light);
            margin-bottom: 5px;
        }
        
        .server-category {
            display: inline-block;
            padding: 8px 20px;
            background: rgba(85, 255, 85, 0.2);
            color: var(--minecraft-green);
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 1px;
            border: 2px solid var(--minecraft-green);
        }
        
        /* SERVER DETAILS */
        .server-details {
            padding: 40px 0;
        }
        
        .details-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }
        
        @media (min-width: 992px) {
            .details-grid {
                grid-template-columns: 2fr 1fr;
            }
        }
        
        /* INFO CARD */
        .info-card {
            background: rgba(5, 10, 15, 0.8);
            border-radius: 15px;
            padding: 30px;
            border: 2px solid rgba(46, 134, 193, 0.2);
            box-shadow: var(--box-shadow);
        }
        
        .info-card h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            color: var(--secondary-light);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(85, 255, 85, 0.2);
        }
        
        .description {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 30px;
        }
        
        /* SERVER SPECS */
        .specs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .spec-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(85, 255, 85, 0.1);
            transition: var(--transition);
        }
        
        .spec-item:hover {
            border-color: var(--minecraft-green);
            transform: translateY(-5px);
        }
        
        .spec-label {
            font-size: 0.9rem;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }
        
        .spec-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4rem;
            color: var(--minecraft-green);
            font-weight: 700;
        }
        
        /* IP BOX */
        .ip-box {
            background: rgba(5, 10, 15, 0.9);
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid rgba(85, 255, 85, 0.3);
            text-align: center;
        }
        
        .ip-box h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--secondary-light);
            margin-bottom: 15px;
        }
        
        .ip-display {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid rgba(85, 255, 85, 0.2);
        }
        
        .ip-text {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--light);
            letter-spacing: 2px;
            word-break: break-all;
        }
        
        .copy-ip-btn {
            background: linear-gradient(135deg, var(--minecraft-green), var(--secondary));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }
        
        .copy-ip-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(85, 255, 85, 0.3);
        }
        
        /* JOIN BUTTON */
        .join-btn-large {
            background: linear-gradient(135deg, var(--accent), #e67e22);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 12px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            width: 100%;
            text-decoration: none;
            margin-top: 20px;
        }
        
        .join-btn-large:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(243, 156, 18, 0.4);
        }
        
        /* TEMPLATE STYLES */
        .template-survival .server-avatar {
            background: linear-gradient(135deg, #55FF55, #28b463);
        }
        
        .template-creative .server-avatar {
            background: linear-gradient(135deg, #5555FF, #2e86c1);
        }
        
        .template-pvp .server-avatar {
            background: linear-gradient(135deg, #FF5555, #e74c3c);
        }
        
        .template-rpg .server-avatar {
            background: linear-gradient(135deg, #AA00AA, #8e44ad);
        }
        
        .template-minigames .server-avatar {
            background: linear-gradient(135deg, #f39c12, #d35400);
        }
        
        /* WEBSITE & DISCORD */
        .external-links {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .external-link {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border-radius: 10px;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .website-link {
            background: rgba(40, 180, 99, 0.1);
            border: 2px solid var(--secondary);
            color: var(--secondary-light);
        }
        
        .website-link:hover {
            background: rgba(40, 180, 99, 0.2);
            transform: translateY(-3px);
        }
        
        .discord-link {
            background: rgba(88, 101, 242, 0.1);
            border: 2px solid #5865F2;
            color: #7289da;
        }
        
        .discord-link:hover {
            background: rgba(88, 101, 242, 0.2);
            transform: translateY(-3px);
        }
        
        /* SERVER STATS */
        .server-stats-side {
            background: rgba(5, 10, 15, 0.8);
            border-radius: 15px;
            padding: 30px;
            border: 2px solid rgba(46, 134, 193, 0.2);
            box-shadow: var(--box-shadow);
            height: fit-content;
        }
        
        .stat-item-side {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stat-item-side:last-child {
            border-bottom: none;
        }
        
        .stat-label-side {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .stat-value-side {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--minecraft-green);
            font-weight: 700;
        }
        
        /* OWNER INFO */
        .owner-info {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(85, 255, 85, 0.1);
        }
        
        .owner-info h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            color: var(--secondary-light);
            margin-bottom: 20px;
        }
        
        .owner-details {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .owner-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid var(--secondary);
        }
        
        .owner-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .owner-text h4 {
            font-size: 1.1rem;
            color: var(--light);
            margin-bottom: 5px;
        }
        
        .owner-text p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* NOTIFICATION */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary-dark), var(--darker));
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            border-left: 4px solid var(--minecraft-green);
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            z-index: 10000;
            animation: slideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 350px;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(85, 255, 85, 0.2);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%) translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateX(0) translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0) translateY(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%) translateY(-20px);
                opacity: 0;
            }
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .server-banner-hero {
                height: 200px;
            }
            
            .banner-overlay {
                padding: 20px;
            }
            
            .server-basic-info {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .server-avatar {
                width: 80px;
                height: 80px;
                font-size: 2rem;
            }
            
            .server-title-section h1 {
                font-size: 1.8rem;
            }
            
            .specs-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .external-link {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Loading -->
    <div class="loading" id="loading">
        <div>CARREGANDO SERVIDOR...</div>
    </div>
    
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="back-btn">
                    <i class="fas fa-arrow-left"></i>
                    VOLTAR
                </a>
                
                <a href="index.html" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-server"></i>
                    </div>
                    <div class="logo-text">
                        <div class="logo-main">MineHost</div>
                        <div class="logo-sub">Detalhes</div>
                    </div>
                </a>
            </div>
        </div>
    </header>
    
    <!-- Server Banner Hero -->
    <div class="server-banner-hero" id="serverBanner">
        <div class="banner-overlay">
            <div class="container">
                <div class="server-basic-info">
                    <div class="server-avatar" id="serverAvatar">
                        <i class="fas fa-server"></i>
                    </div>
                    <div class="server-title-section">
                        <h1 id="serverName">Nome do Servidor</h1>
                        <span class="server-category" id="serverCategory">Survival</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Server Details -->
    <main class="server-details">
        <div class="container">
            <div class="details-grid">
                <!-- Left Column -->
                <div class="left-column">
                    <!-- Server Info -->
                    <div class="info-card">
                        <h2><i class="fas fa-info-circle"></i> SOBRE O SERVIDOR</h2>
                        <p class="description" id="serverDescription">
                            Descrição do servidor será carregada aqui...
                        </p>
                        
                        <!-- Server Specifications -->
                        <div class="specs-grid">
                            <div class="spec-item">
                                <div class="spec-label">Jogadores Online</div>
                                <div class="spec-value" id="playersOnline">0/100</div>
                            </div>
                            <div class="spec-item">
                                <div class="spec-label">Versão</div>
                                <div class="spec-value" id="serverVersion">1.20.1</div>
                            </div>
                            <div class="spec-item">
                                <div class="spec-label">Status</div>
                                <div class="spec-value" id="serverStatus">Online</div>
                            </div>
                            <div class="spec-item">
                                <div class="spec-label">Template</div>
                                <div class="spec-value" id="serverTemplate">Survival</div>
                            </div>
                        </div>
                        
                        <!-- IP Address -->
                        <div class="ip-box">
                            <h3><i class="fas fa-network-wired"></i> ENDEREÇO DO SERVIDOR</h3>
                            <div class="ip-display">
                                <div class="ip-text" id="serverAddress">carregando...:25565</div>
                            </div>
                            <button class="copy-ip-btn" id="copyIpBtn">
                                <i class="fas fa-copy"></i>
                                COPIAR IP
                            </button>
                        </div>
                        
                        <!-- Join Button -->
                        <a href="javascript:void(0)" class="join-btn-large" id="joinServerBtn">
                            <i class="fas fa-gamepad"></i>
                            ENTRAR NO SERVIDOR
                        </a>
                        
                        <!-- Website & Discord Links -->
                        <div class="external-links" id="externalLinks">
                            <!-- Links serão carregados dinamicamente -->
                        </div>
                    </div>
                </div>
                
                <!-- Right Column -->
                <div class="right-column">
                    <!-- Server Stats -->
                    <div class="server-stats-side">
                        <h2><i class="fas fa-chart-bar"></i> ESTATÍSTICAS</h2>
                        <div class="stat-item-side">
                            <span class="stat-label-side">Visualizações</span>
                            <span class="stat-value-side" id="viewsCount">0</span>
                        </div>
                        <div class="stat-item-side">
                            <span class="stat-label-side">Entradas</span>
                            <span class="stat-value-side" id="joinsCount">0</span>
                        </div>
                        <div class="stat-item-side">
                            <span class="stat-label-side">Criado em</span>
                            <span class="stat-value-side" id="createdAt">-</span>
                        </div>
                        <div class="stat-item-side">
                            <span class="stat-label-side">Categoria</span>
                            <span class="stat-value-side" id="categoryName">-</span>
                        </div>
                    </div>
                    
                    <!-- Owner Info -->
                    <div class="owner-info">
                        <h3><i class="fas fa-user"></i> CRIADOR DO SERVIDOR</h3>
                        <div class="owner-details">
                            <div class="owner-avatar">
                                <img id="ownerAvatar" src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Owner">
                            </div>
                            <div class="owner-text">
                                <h4 id="ownerName">Anônimo</h4>
                                <p id="ownerId">ID do Usuário</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <script>
        // Variáveis globais
        let currentUser = null;
        let serverData = null;
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', async function() {
            // Verificar autenticação
            await checkAuth();
            
            // Carregar dados do servidor
            await loadServerData();
            
            // Configurar eventos
            setupEventListeners();
        });
        
        // Verificar autenticação
        async function checkAuth() {
            try {
                if (window.firebase && window.firebase.onAuthStateChanged) {
                    window.firebase.onAuthStateChanged(window.firebase.auth, (user) => {
                        currentUser = user;
                    });
                }
            } catch (error) {
                console.error('Erro ao verificar autenticação:', error);
            }
        }
        
        // Carregar dados do servidor
        async function loadServerData() {
            try {
                // Obter slug da URL
                const urlParams = new URLSearchParams(window.location.search);
                const slug = urlParams.get('slug');
                
                if (!slug) {
                    showNotification('Servidor não encontrado!');
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 2000);
                    return;
                }
                
                // Buscar servidor pelo slug
                const serversQuery = window.firebase.query(
                    window.firebase.collection(window.firebase.db, 'servers'),
                    window.firebase.where('slug', '==', slug)
                );
                
                const serversSnapshot = await window.firebase.getDocs(serversQuery);
                
                if (serversSnapshot.empty) {
                    showNotification('Servidor não encontrado!');
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 2000);
                    return;
                }
                
                // Obter dados do servidor
                const serverDoc = serversSnapshot.docs[0];
                serverData = {
                    id: serverDoc.id,
                    ...serverDoc.data()
                };
                
                // Atualizar contador de views
                await window.firebase.updateDoc(
                    window.firebase.doc(window.firebase.db, 'servers', serverDoc.id),
                    {
                        views: window.firebase.increment(1)
                    }
                );
                
                // Atualizar a UI com os dados do servidor
                updateServerUI();
                
                // Esconder loading
                document.getElementById('loading').classList.add('hidden');
                
            } catch (error) {
                console.error('Erro ao carregar servidor:', error);
                showNotification('Erro ao carregar dados do servidor');
                document.getElementById('loading').classList.add('hidden');
            }
        }
        
        // Atualizar UI com dados do servidor
        function updateServerUI() {
            if (!serverData) return;
            
            // Configurar classe do template
            document.body.classList.add(`template-${serverData.template || 'survival'}`);
            
            // Atualizar avatar do servidor
            const serverAvatar = document.getElementById('serverAvatar');
            if (serverAvatar) {
                serverAvatar.innerHTML = `<i class="fas fa-${getCategoryIcon(serverData.category)}"></i>`;
            }
            
            // Atualizar banner
            const serverBanner = document.getElementById('serverBanner');
            if (serverBanner && serverData.banner) {
                let bannerUrl = serverData.banner;
                if (!bannerUrl.startsWith('http')) {
                    bannerUrl = `https://neyrdxxqihgvphuhjqmy.supabase.co/storage/v1/object/public/MineSV%20IMG/${bannerUrl}`;
                }
                serverBanner.innerHTML = `
                    <img src="${bannerUrl}" alt="${serverData.name}" 
                         onerror="this.src='https://picsum.photos/1200/400?random=${serverData.id}'">
                    <div class="banner-overlay">
                        <div class="container">
                            <div class="server-basic-info">
                                <div class="server-avatar" id="serverAvatar">
                                    <i class="fas fa-${getCategoryIcon(serverData.category)}"></i>
                                </div>
                                <div class="server-title-section">
                                    <h1>${serverData.name}</h1>
                                    <span class="server-category">${getCategoryName(serverData.category)}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // Atualizar informações básicas
            document.getElementById('serverName').textContent = serverData.name;
            document.getElementById('serverCategory').textContent = getCategoryName(serverData.category);
            document.getElementById('serverDescription').textContent = serverData.description;
            document.getElementById('playersOnline').textContent = `${serverData.players || 0}/${serverData.maxPlayers || 100}`;
            document.getElementById('serverVersion').textContent = serverData.version || '1.20.1';
            document.getElementById('serverStatus').textContent = serverData.online ? 'Online' : 'Offline';
            document.getElementById('serverStatus').style.color = serverData.online ? '#55FF55' : '#FF5555';
            document.getElementById('serverTemplate').textContent = getTemplateName(serverData.template);
            document.getElementById('serverAddress').textContent = `${serverData.ip || 'sem-ip.com'}:${serverData.port || '25565'}`;
            
            // Atualizar estatísticas
            document.getElementById('viewsCount').textContent = serverData.views || 0;
            document.getElementById('joinsCount').textContent = serverData.joins || 0;
            document.getElementById('categoryName').textContent = getCategoryName(serverData.category);
            
            // Formatar data de criação
            if (serverData.createdAt) {
                let createdAt = new Date();
                if (serverData.createdAt.toDate) {
                    createdAt = serverData.createdAt.toDate();
                } else if (typeof serverData.createdAt === 'string') {
                    createdAt = new Date(serverData.createdAt);
                } else if (serverData.createdAt.seconds) {
                    createdAt = new Date(serverData.createdAt.seconds * 1000);
                }
                document.getElementById('createdAt').textContent = createdAt.toLocaleDateString('pt-BR');
            }
            
            // Atualizar informações do dono
            document.getElementById('ownerName').textContent = serverData.ownerName || 'Anônimo';
            document.getElementById('ownerId').textContent = `ID: ${serverData.ownerId?.substring(0, 8) || '--------'}`;
            
            if (serverData.ownerAvatar) {
                document.getElementById('ownerAvatar').src = serverData.ownerAvatar;
            }
            
            // Atualizar links externos
            const externalLinks = document.getElementById('externalLinks');
            if (externalLinks) {
                let linksHTML = '';
                
                if (serverData.website) {
                    linksHTML += `
                        <a href="${serverData.website}" target="_blank" class="external-link website-link">
                            <i class="fas fa-globe"></i>
                            VISITAR WEBSITE
                        </a>
                    `;
                }
                
                if (serverData.discord) {
                    linksHTML += `
                        <a href="${serverData.discord}" target="_blank" class="external-link discord-link">
                            <i class="fab fa-discord"></i>
                            JUNTE-SE AO DISCORD
                        </a>
                    `;
                }
                
                externalLinks.innerHTML = linksHTML;
            }
        }
        
        // Configurar eventos
        function setupEventListeners() {
            // Copiar IP
            const copyIpBtn = document.getElementById('copyIpBtn');
            if (copyIpBtn) {
                copyIpBtn.addEventListener('click', copyServerIP);
            }
            
            // Entrar no servidor
            const joinServerBtn = document.getElementById('joinServerBtn');
            if (joinServerBtn) {
                joinServerBtn.addEventListener('click', joinServer);
            }
        }
        
        // Copiar IP do servidor
        function copyServerIP() {
            if (!serverData) return;
            
            const ip = `${serverData.ip}:${serverData.port}`;
            navigator.clipboard.writeText(ip).then(() => {
                showNotification('IP copiado para a área de transferência!');
            }).catch(err => {
                console.error('Erro ao copiar IP:', err);
                showNotification('Erro ao copiar IP');
            });
        }
        
        // Entrar no servidor
        function joinServer() {
            if (!serverData) return;
            
            // Incrementar contador de joins
            if (window.firebase && window.firebase.updateDoc) {
                window.firebase.updateDoc(
                    window.firebase.doc(window.firebase.db, 'servers', serverData.id),
                    {
                        joins: window.firebase.increment(1)
                    }
                ).catch(err => console.error('Erro ao atualizar joins:', err));
            }
            
            // Deep link para Minecraft
            const minecraftUrl = `minecraft://?addExternalServer=MineHost|${serverData.ip}:${serverData.port}`;
            
            // Tentar abrir o Minecraft
            window.location.href = minecraftUrl;
            
            // Fallback
            setTimeout(() => {
                if (document.hasFocus()) {
                    copyServerIP();
                    showNotification('IP copiado! Cole no Minecraft manualmente.');
                }
            }, 1000);
        }
        
        // Obter ícone da categoria
        function getCategoryIcon(category) {
            const icons = {
                'survival': 'tree',
                'creative': 'paint-brush',
                'pvp': 'crosshairs',
                'rpg': 'dragon',
                'minigames': 'gamepad',
                'modded': 'puzzle-piece',
                'anarchy': 'skull-crossbones',
                'hardcore': 'heartbeat'
            };
            return icons[category] || 'server';
        }
        
        // Obter nome da categoria
        function getCategoryName(category) {
            const names = {
                'survival': 'Survival',
                'creative': 'Creative',
                'pvp': 'PvP',
                'rpg': 'RPG',
                'minigames': 'Minigames',
                'modded': 'Modded',
                'anarchy': 'Anarchy',
                'hardcore': 'Hardcore'
            };
            return names[category] || category;
        }
        
        // Obter nome do template
        function getTemplateName(template) {
            const names = {
                'survival': 'Survival',
                'creative': 'Creative',
                'pvp': 'PvP',
                'rpg': 'RPG',
                'minigames': 'Minigames',
                'modded': 'Modded'
            };
            return names[template] || template;
        }
        
        // Mostrar notificação
        function showNotification(message) {
            // Remover notificação anterior
            const oldNotification = document.querySelector('.notification');
            if (oldNotification) {
                oldNotification.remove();
            }
            
            // Criar nova notificação
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `
                <i class="fas fa-check-circle" style="color: var(--minecraft-green); font-size: 1.4rem;"></i>
                <span style="flex: 1;">${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Remover após 3 segundos
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.4s ease forwards';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 400);
            }, 3000);
        }
    </script>
</body>
</html>
